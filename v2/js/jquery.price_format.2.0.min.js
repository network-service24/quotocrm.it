!function(t){t.fn.priceFormat=function(n){var r={prefix:"US$ ",suffix:"",centsSeparator:".",thousandsSeparator:",",limit:!1,centsLimit:2,clearPrefix:!1,clearSufix:!1,allowNegative:!1,insertPlusSign:!1,clearOnEmpty:!1},n=t.extend(r,n);return this.each(function(){function r(t){p.is("input")?p.val(t):p.html(t)}function i(){return m=p.is("input")?p.val():p.html()}function a(t){for(var n="",r=0;r<t.length;r++)char_=t.charAt(r),0==n.length&&0==char_&&(char_=!1),char_&&char_.match(v)&&(x?n.length<x&&(n+=char_):n+=char_);return n}function e(t){for(;t.length<S+1;)t="0"+t;return t}function c(n,r){if(!r&&(""===n||n==c("0",!0))&&w)return"";var i=e(a(n)),f="",o=0;0==S&&(g="",u="");var u=i.substr(i.length-S,S),s=i.substr(0,i.length-S);if(i=0==S?s:s+g+u,b||""!=t.trim(b)){for(var h=s.length;h>0;h--)char_=s.substr(h-1,1),o++,o%3==0&&(char_=b+char_),f=char_+f;f.substr(0,1)==b&&(f=f.substring(1,f.length)),i=0==S?f:f+g+u}return!O||0==s&&0==u||(i=-1!=n.indexOf("-")&&n.indexOf("+")<n.indexOf("-")?"-"+i:P?"+"+i:""+i),_&&(i=_+i),d&&(i+=d),i}function f(t){var n=t.keyCode?t.keyCode:t.which,i=String.fromCharCode(n),a=!1,e=m,f=c(e+i);(n>=48&&n<=57||n>=96&&n<=105)&&(a=!0),8==n&&(a=!0),9==n&&(a=!0),13==n&&(a=!0),46==n&&(a=!0),37==n&&(a=!0),39==n&&(a=!0),!O||189!=n&&109!=n&&173!=n||(a=!0),!P||187!=n&&107!=n&&61!=n||(a=!0),a||(t.preventDefault(),t.stopPropagation(),e!=f&&r(f))}function o(){var t=i(),n=c(t);t!=n&&r(n),0==parseFloat(t)&&w&&r("")}function u(){p.val(_+i())}function s(){p.val(i()+d)}function h(){if(""!=t.trim(_)&&y){r(i().split(_)[1])}}function l(){if(""!=t.trim(d)&&k){r(i().split(d)[0])}}var p=t(this),m="",v=/[0-9]/;m=p.is("input")?p.val():p.html();var _=n.prefix,d=n.suffix,g=n.centsSeparator,b=n.thousandsSeparator,x=n.limit,S=n.centsLimit,y=n.clearPrefix,k=n.clearSuffix,O=n.allowNegative,P=n.insertPlusSign,w=n.clearOnEmpty;P&&(O=!0),p.bind("keydown.price_format",f),p.bind("keyup.price_format",o),p.bind("focusout.price_format",o),y&&(p.bind("focusout.price_format",function(){h()}),p.bind("focusin.price_format",function(){u()})),k&&(p.bind("focusout.price_format",function(){l()}),p.bind("focusin.price_format",function(){s()})),i().length>0&&(o(),h(),l())})},t.fn.unpriceFormat=function(){return t(this).unbind(".price_format")},t.fn.unmask=function(){var n,r="";n=t(this).is("input")?t(this).val():t(this).html();for(var i in n)isNaN(n[i])&&"-"!=n[i]||(r+=n[i]);return r}}(jQuery);